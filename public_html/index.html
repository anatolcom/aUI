<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
 <head>
  <title>HTML5</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="aUI.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen, projection"/>
  <script type="text/javascript" src="js/aURL.js"></script>  
  <script type="text/javascript" src="js/aUI.js"></script> 
  <script>
   var aURL = new AURL();
   function changeAdd()
   {
    console.log("changeAdd", this);
   }
   aURL.setListener("changeAdd", "add", changeAdd);
   aURL.init();
   function paramUp(name)
   {
    //console.log(name, aURL.get(name));
    var value = aURL.getNumber(name);
    if (value === undefined) value = 0;
    else value++;
    aURL.set(name, value);
   }
   function paramDown(name)
   {
    var value = aURL.getNumber(name);
    if (value === undefined) return;
    if (--value < 0) aURL.remove(name);
    else aURL.set(name, value);
   }
  </script>
 </head>
 <body>
  <header>
   <h1>aUI</h1>
  </header>
  <nav>
   <menu class="absolute">
    <a href="javascript:paramUp('add');">add</a><a href="javascript:paramDown('add');">del</a>
   </menu>
   <menu class="fixed circle">
    <a href="javascript:paramUp('del');">add</a><a href="javascript:paramDown('del');">del</a>
   </menu>
  </nav>
  <section>
   <!--article>
    <h1>Заголовок статьи из блока "article"</h1>
    <p>Текст абзаца статьи из блока "article"</p>
    <details>
     <summary>Блок "details", текст тега "summary"</summary>
     <p>Абзац из блока "details"</p>
    </details>
   </article-->
  </section>
  <footer>anatol.com</footer>  
  <script>
   //var element = new aUI.Element({ text:"DIV" });
   function click() 
   {
    text.setText(this.data);
    this.toggleSelect();
    textCnt.setText(list.selected().length);
    
    //console.log("selected", this.selected());
    //text.hidden(this.selected());
   }
   function add()
   {
    list.add({ text:"btn " + list.count(), data:list.count(), onclick:click });        
   }
   function sum()
   {
    textCnt.setText(list.selected().length);
   }
   function clear()
   {
    list.clear();
   }
   var parent = document.getElementsByTagName("section").item(0);
   var buttons = new aUI.Element({ class:"buttons" });
   buttons.appendTo(parent);
   
   var btnAdd = new aUI.Button({ text:"Add", onclick:add });
   btnAdd.addClass("success");
   btnAdd.appendTo(buttons);
   var btnClear = new aUI.Button({ text:"Clear", onclick:clear });
   btnClear.addClass("warning");
   btnClear.appendTo(buttons);
   var btnSum = new aUI.Button({ text:"Sum", onclick:sum });
   btnSum.appendTo(buttons);
   
   function MyItem(options)
   {
    var that = this;
    aUI.ListItem.call(this, { class:"myItem", onclick:options.onclick, data:options.data });
    var text = new aUI.Element({ class:"text", text:options.text, html:options.html });
    var btn = new aUI.Button({ class:"close", text:"x" });
    btn.setClick(function() 
    { 
     that.remove(); 
     event.stopPropagation();
    });
    text.appendTo(this);
    btn.appendTo(this);
   }
   aUI.proto(MyItem, aUI.ListItem);
   
   
   var area = new aUI.ScrollArea({ class:"scrollarea", width:"200px", height:"200px" });
   area.appendTo(parent);
   
   var list = new aUI.List({ class:"menu" });//caption:"Button"
   list.setItemConstructor(MyItem);
   list.appendTo(area);
   
   var resultBlock = new aUI.Element({ class:"resultBlock" });
   resultBlock.appendTo(parent);
   var text = new aUI.Element({ class:"circle", text:"?" });
   text.appendTo(resultBlock);
   var textCnt = new aUI.Element({ class:"circle", text:"0" });
   textCnt.appendTo(resultBlock);
   //console.dir(list);
   //list.setClick(function(){alert("click " + this.data);});
  </script>
 </body>
</html>
