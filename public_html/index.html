<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
 <head>
  <title>HTML5</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="aUI.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="css/aUI.css" type="text/css" media="screen, projection"/>
  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen, projection"/>
  <script type="text/javascript" src="js/aUtils.js"></script>  
  <script type="text/javascript" src="js/aURL.js"></script>  
  <script type="text/javascript" src="js/aUI.js"></script> 
  <script>
   var aURL = new AURL();
   function changeSections()
   {
       if (typeof fillSectionList === "function") fillSectionList(this.value);
   }
   function changeSelected()
   {
       if (typeof selectSection === "function") selectSection(this.value);
   }
   aURL.setListener("changeSections", "sections", changeSections);
   aURL.setListener("changeSelected", "selected", changeSelected);
   aURL.init();
   function paramUp(name)
   {
       //console.log(name, aURL.get(name));
       var value = aURL.getNumber(name);
       if (value === undefined) value = 0;
       else value++;
       aURL.set(name, value);
   }
   function paramDown(name)
   {
       var value = aURL.getNumber(name);
       if (value === undefined) return;
       if (--value < 0) aURL.remove(name);
       else aURL.set(name, value);
   }
  </script>
 </head>
 <body>
  <header>
   <h1>aUI</h1>
  </header>
  <nav>
   <menu class="absolute">
    <a href="javascript:paramUp('sections');">add</a><a href="javascript:paramDown('sections');">del</a>
   </menu>
   <menu class="fixed circle">
    <a href="javascript:paramUp('test');">add</a><a href="javascript:paramDown('test');">del</a>
   </menu>
  </nav>
  <section>

   
  </section>
  <a href="http://learn.javascript.ru/keyboard-events">http://learn.javascript.ru/keyboard-events</a>
<!--  <div>
   <input list="options">
  </div>-->

  <footer>anatol.com</footer>  
  <script>
   var parent = document.getElementsByTagName("section").item(0);

   function addSection(caption)
   {
       sectionMenu.add({ text : caption, onclick : sectionMenuClick });
       if (sectionMenu.count() === 1) sectionMenu.selectSingle(0);
       var section = sections.add({ class : "section" });
       new aUI.Element({ class : "caption", text : caption }).appendTo(section);
       return new aUI.Element({ class : "content" }).appendTo(section);
   }
   function removeLastSection()
   {
       sectionMenu.remove(sections.count() - 1);
       sections.remove(sections.count() - 1);
   }
   function selectSection(index)
   {
       if (sectionList.topIndex() === Number(index)) return;
       sectionList.topIndex(index);
   }

   function sectionMenuClick()
   {
       aURL.set("selected", this.index());
   }
   function changeTopSection()
   {
       sectionMenu.selectSingle(this.index());
       aURL.set("selected", this.index());
   }

   var sectionMenu = new aUI.List({ class : "sectionMenu" }).appendTo(parent);//caption:"Button"

   var sectionList = new aUI.ScrollList({ class : "scrollarea", vertical : "show", listOptions : { class : "sections" } });
   sectionList.appendTo(parent);
   sectionList.onChangeTop(changeTopSection);
   var sections = sectionList.getList();

   var section1 = addSection("Input");
   var section2 = addSection("Calendar");

//   function fillSectionList(count)
//   {
//       if (count === sectionList.getList().count()) return;
//       while (count < sectionList.getList().count()) removeLastSection();
//       for (var q = sectionList.getList().count(); q < count; q++) addSection();
//   }
//   fillSectionList(aURL.get("sections"));


   selectSection(aURL.get("selected"));

   var btn1 = new aUI.Button({ text : "button" }).appendTo(section1);
//   btn1.onclick(btn.toggleSelect);

   var btn2 = new aUI.Button({ text : "selectable" }).appendTo(section1);
   btn2.onclick(btn2.toggleSelect);

   var edit = new aUI.Edit({ placeholder : "Edit" }).appendTo(section1);
   edit.validator(new aUI.validator.Pattern("\\d{2}.\\d{2}.\\d{4}"));

   var memo = new aUI.Memo({ placeholder : "Memo" }).appendTo(section1);
   memo.validator(new aUI.validator.Pattern("[ а-яА-ЯёЁ]{0,}"));


   //var resultBlock = new aUI.Element({ class : "resultBlock" }).appendTo(parent);
   //var text = new aUI.Element({ class : "circle", text : "?" }).appendTo(resultBlock);
   //var textCnt = new aUI.Element({ class : "circle", text : "0" }).appendTo(resultBlock);
   //console.dir(list);
   //list.onClick(function(){alert("click " + this.data);});

   function changeDate()
   {
       edit.value(aUtils.dateToStr(this.value(), "dd.MM.yyyy"));
   }
   var calendar1 = new aUI.Calendar({ onchange : changeDate });
//   calendar1.addClass("smo");
   calendar1.appendTo(section2);
   var calendar2 = new aUI.Calendar({ onchange : changeDate });
   calendar2.addClass("medium");
   calendar2.appendTo(section2);
   var calendar3 = new aUI.Calendar({ onchange : changeDate });
   calendar3.addClass("large");
   calendar3.appendTo(section2);
  </script>
<!--  <datalist id="options">
   <option>option 1</option>
   <option>option 2</option>
  </datalist>-->

 </body>
</html>
